<div class=" m-10">
    <div class="">
      <h2>       
        <a class="m-10 text-2xl" [routerLink]="['/products']">
            <mat-icon>arrow_back</mat-icon>
             Products
        </a>       
      </h2>
    </div>
    <mat-divider class="pt-10 text-gray-50 "></mat-divider>
    <div class=" flex justify-center p-4 ">
      <div class="w-2xl">
        <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
          <mat-card style="background-color: rgb(241, 236, 229);">
            <mat-card-header>Ajouter un produit</mat-card-header>
            <mat-card-content>
              <mat-form-field class="w-full">
                <mat-label>Product Name</mat-label>
                <input matInput formControlName="name">
              </mat-form-field>
              <mat-form-field class="w-full mt-3">
                <mat-label>Slecet category</mat-label>
                <mat-select formControlName="categoryId">
                  <mat-option value="" disabled>Select Category</mat-option>
                  <mat-option *ngFor="let category of categories" [value]="category.id">
                    {{ category.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="w-full mt-3">
                <mat-label>Price</mat-label>
                <input matInput type="number" formControlName="price">
              </mat-form-field>
              <mat-form-field class="w-full mt-3">
                <mat-label>Quantity</mat-label>
                <input matInput type="number" formControlName="quantity">
              </mat-form-field>
              <mat-form-field class="w-full mt-3">
                <mat-label>Description</mat-label>
                <textarea matInput formControlName="description"></textarea>
              </mat-form-field>
              <mat-form-field class="w-full">
                <mat-label>Image Url</mat-label>
                <input matInput formControlName="img" required="">
              </mat-form-field>
            <input hidden (change)="onImageUpload()" type="file"  placeholder="Product Image"/>
            <button *ngIf="productForm.value.img"
             type="button" (click)="openDialog(productForm.value.img)" class="w-full flex items-center justify-center gap-2 mb-5 bg-green-900 text-white rounded-md p-2">
                <mat-icon>add_a_photo</mat-icon>
                <span>Show Image</span>
            </button>              
              
              
              
            </mat-card-content>
            <mat-card-actions class="justify-center text-orange-900 ">
              <button mat-button class=" bg-cyan-400  rounded-md p-2" type="submit">                
                <mat-icon>save</mat-icon>
                Sauvegarder
              </button>
            </mat-card-actions>
          </mat-card>
        </form>
      </div>
    </div>


    <div *ngIf="showModal" class="modal" style="display: block;">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header justify-content-end">
            <button type="button" class="close" (click)="showModal = false">&times;</button>
          </div>
          <div class="modal-body text-center">
            <img [src]="imageUrl" class="img-fluid">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn" (click)="showModal = false">Fermer</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  
